<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BitDogLab - Painel de Controle</title>
    <link rel="stylesheet" href="/css/style.css.gz">
</head>
<body>
    <div class="container">
        <header>
            <h1>üêï BitDogLab - Painel de Controle</h1>
            <p class="subtitle">Placa educacional RP2040 | Uptime: <span id="uptime"><!--#uptime--></span>s</p>
        </header>

        <div class="main-grid">
            <!-- Se√ß√£o de Componentes -->
            <section class="card components-section">
                <h2>üìã Componentes do Kit</h2>
                <table class="components-table">
                    <thead>
                        <tr>
                            <th>Componente</th>
                            <th>GPIO</th>
                            <th>Tipo</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>üî¥ LED RGB - Vermelho</td>
                            <td>13</td>
                            <td>PWM</td>
                            <td><span id="led-r-status" class="status-badge">-</span></td>
                        </tr>
                        <tr>
                            <td>üü¢ LED RGB - Verde</td>
                            <td>11</td>
                            <td>PWM</td>
                            <td><span id="led-g-status" class="status-badge">-</span></td>
                        </tr>
                        <tr>
                            <td>üîµ LED RGB - Azul</td>
                            <td>12</td>
                            <td>PWM</td>
                            <td><span id="led-b-status" class="status-badge">-</span></td>
                        </tr>
                        <tr>
                            <td>üÖ∞Ô∏è Bot√£o A</td>
                            <td>5</td>
                            <td>Input</td>
                            <td><span id="btn-a-status" class="status-badge"><!--#btna--></span></td>
                        </tr>
                        <tr>
                            <td>üÖ±Ô∏è Bot√£o B</td>
                            <td>6</td>
                            <td>Input</td>
                            <td><span id="btn-b-status" class="status-badge"><!--#btnb--></span></td>
                        </tr>
                        <tr>
                            <td>üïπÔ∏è Joystick X</td>
                            <td>26 (ADC0)</td>
                            <td>Analog</td>
                            <td><span id="joy-x-status" class="status-badge"><!--#joyx--></span></td>
                        </tr>
                        <tr>
                            <td>üïπÔ∏è Joystick Y</td>
                            <td>27 (ADC1)</td>
                            <td>Analog</td>
                            <td><span id="joy-y-status" class="status-badge"><!--#joyy--></span></td>
                        </tr>
                        <tr>
                            <td>üîò Joystick Btn</td>
                            <td>22</td>
                            <td>Input</td>
                            <td><span id="joy-btn-status" class="status-badge"><!--#joybtn--></span></td>
                        </tr>
                        <tr>
                            <td>üîä Buzzer Esq.</td>
                            <td>21</td>
                            <td>PWM</td>
                            <td><span class="status-badge ready">Pronto</span></td>
                        </tr>
                        <tr>
                            <td>üîä Buzzer Dir.</td>
                            <td>10</td>
                            <td>PWM</td>
                            <td><span class="status-badge ready">Pronto</span></td>
                        </tr>
                        <tr>
                            <td>üì∫ OLED SSD1306</td>
                            <td>14/15 (I2C1)</td>
                            <td>I2C</td>
                            <td><span class="status-badge active">Ativo</span></td>
                        </tr>
                        <tr>
                            <td>üí° Matriz LED 5x5</td>
                            <td>7</td>
                            <td>WS2812B</td>
                            <td><span class="status-badge active">Ativo</span></td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Controles de Entrada -->
            <section class="card controls-section">
                <h2>üéÆ Controles de Entrada</h2>
                
                <div class="controls-grid">
                    <!-- Bot√µes -->
                    <div class="control-group">
                        <h3>Bot√µes</h3>
                        <div class="buttons-display">
                            <div class="btn-indicator" id="btn-a-indicator">
                                <span class="btn-label">A</span>
                                <span class="btn-state" id="btn-a-state">Solto</span>
                            </div>
                            <div class="btn-indicator" id="btn-b-indicator">
                                <span class="btn-label">B</span>
                                <span class="btn-state" id="btn-b-state">Solto</span>
                            </div>
                        </div>
                    </div>

                    <!-- Joystick -->
                    <div class="control-group">
                        <h3>Joystick</h3>
                        <div class="joystick-display">
                            <div class="joystick-visual">
                                <div class="joystick-base">
                                    <div class="joystick-stick" id="joystick-stick"></div>
                                    <div class="joystick-center"></div>
                                </div>
                            </div>
                            <div class="joystick-values">
                                <div>X: <span id="joy-x-val">2048</span></div>
                                <div>Y: <span id="joy-y-val">2048</span></div>
                                <div>Btn: <span id="joy-btn-val">Solto</span></div>
                            </div>
                        </div>
                    </div>

                    <!-- Buzzer (ocupa 2 colunas) -->
                    <div class="control-group full-width">
                        <h3>üîä Buzzers</h3>
                        <div class="buzzer-controls">
                            <div class="buzzer-sliders">
                                <div class="slider-group">
                                    <label>Freq: <span id="buzzer-freq-val">1000</span> Hz</label>
                                    <input type="range" id="buzzer-freq" min="100" max="5000" value="1000" step="50" oninput="updateBuzzerValues()">
                                </div>
                                <div class="slider-group">
                                    <label>Dura√ß√£o: <span id="buzzer-dur-val">100</span> ms</label>
                                    <input type="range" id="buzzer-dur" min="50" max="1000" value="100" step="50" oninput="updateBuzzerValues()">
                                </div>
                            </div>
                            <div class="buzzer-select">
                                <label>Canal:</label>
                                <select id="buzzer-channel">
                                    <option value="both">Ambos</option>
                                    <option value="left">Esquerdo (GPIO 21)</option>
                                    <option value="right">Direito (GPIO 10)</option>
                                </select>
                            </div>
                            <div class="buzzer-buttons">
                                <button onclick="playBuzzer()" class="buzzer-play-btn">‚ñ∂ Tocar</button>
                            </div>
                            <div class="buzzer-scale">
                                <button onclick="playBuzzer(262, 200)" class="buzzer-note">D√≥</button>
                                <button onclick="playBuzzer(294, 200)" class="buzzer-note">R√©</button>
                                <button onclick="playBuzzer(330, 200)" class="buzzer-note">Mi</button>
                                <button onclick="playBuzzer(349, 200)" class="buzzer-note">F√°</button>
                                <button onclick="playBuzzer(392, 200)" class="buzzer-note">Sol</button>
                                <button onclick="playBuzzer(440, 200)" class="buzzer-note">L√°</button>
                                <button onclick="playBuzzer(494, 200)" class="buzzer-note">Si</button>
                                <button onclick="playBuzzer(523, 200)" class="buzzer-note">D√≥‚Å∫</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Matriz de LEDs -->
            <section class="card led-matrix-section">
                <h2>üí° Matriz de LEDs 5x5</h2>
                <div class="led-matrix-container">
                    <div class="led-matrix" id="led-matrix">
                        <!-- LEDs ser√£o gerados pelo JavaScript -->
                    </div>
                    <div class="matrix-controls">
                        <div class="color-picker">
                            <label>Cor: </label>
                            <input type="color" id="led-color" value="#ff0000">
                        </div>
                        <div class="matrix-buttons">
                            <button onclick="clearMatrix()">Limpar</button>
                            <button onclick="fillMatrix()">Preencher</button>
                            <button onclick="sendMatrix()">Enviar</button>
                        </div>
                        <div class="presets">
                            <span>S√≠mbolos:</span>
                            <button onclick="setPreset('heart')" title="Cora√ß√£o">‚ù§Ô∏è</button>
                            <button onclick="setPreset('smile')" title="Smile">üòä</button>
                            <button onclick="setPreset('x')" title="X">‚ùå</button>
                            <button onclick="setPreset('check')" title="Check">‚úì</button>
                            <button onclick="setPreset('square')" title="Quadrado">‚óªÔ∏è</button>
                            <button onclick="setPreset('diamond')" title="Diamante">‚óá</button>
                            <button onclick="setPreset('plus')" title="Cruz">‚ûï</button>
                        </div>
                        <div class="presets">
                            <span>Setas:</span>
                            <button onclick="setPreset('arrow_up')" title="Cima">‚¨ÜÔ∏è</button>
                            <button onclick="setPreset('arrow_down')" title="Baixo">‚¨áÔ∏è</button>
                            <button onclick="setPreset('arrow_left')" title="Esquerda">‚¨ÖÔ∏è</button>
                            <button onclick="setPreset('arrow_right')" title="Direita">‚û°Ô∏è</button>
                        </div>
                        <div class="presets">
                            <span>Efeitos:</span>
                            <button onclick="waveTopBottom()" title="Onda ‚Üì">üåä‚¨á</button>
                            <button onclick="waveBottomTop()" title="Onda ‚Üë">üåä‚¨Ü</button>
                            <button onclick="waveLeftRight()" title="Onda ‚Üí">üåä‚û°</button>
                            <button onclick="waveRightLeft()" title="Onda ‚Üê">üåä‚¨Ö</button>
                            <button onclick="waveExpand()" title="Expans√£o">üí´</button>
                            <button onclick="stopAnimation()" title="Parar">‚èπÔ∏è</button>
                        </div>
                        <div class="presets">
                            <span>RGB:</span>
                            <button onclick="effectRainbow()" title="Arco-√≠ris">üåà</button>
                            <button onclick="effectRainbowSpiral()" title="Espiral Arco-√≠ris">üåÄüåà</button>
                            <button onclick="effectColorChase()" title="Cores Perseguindo">üèÉ‚Äç‚ôÇÔ∏è</button>
                            <button onclick="effectBreathing()" title="Respira√ß√£o">üí®</button>
                            <button onclick="effectFire()" title="Fogo">üî•</button>
                            <button onclick="effectSparkle()" title="Brilhos">‚ú®</button>
                        </div>
                        <div class="presets">
                            <span>Cores:</span>
                            <button onclick="effectColorWheel()" title="Roda de Cores">üé°</button>
                            <button onclick="effectGradient()" title="Gradiente">üé®</button>
                            <button onclick="effectPulse()" title="Pulso">üíì</button>
                            <button onclick="effectRandomColors()" title="Cores Aleat√≥rias">üé≤</button>
                            <button onclick="effectMatrixRain()" title="Chuva Matrix">üíö</button>
                            <button onclick="effectOceanWaves()" title="Ondas do Oceano">üåä</button>
                        </div>
                        <div class="presets">
                            <span>Especial:</span>
                            <button onclick="effectLavaLamp()" title="L√¢mpada de Lava">ü´ß</button>
                            <button onclick="effectPolice()" title="Pol√≠cia">üö®</button>
                            <button onclick="effectDisco()" title="Disco">ü™©</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- OLED Display -->
            <section class="card oled-section">
                <h2>üì∫ Display OLED</h2>
                <div class="oled-container">
                    <div class="oled-preview" id="oled-preview">
                        <div class="oled-line" id="oled-line-0"></div>
                        <div class="oled-line" id="oled-line-1"></div>
                        <div class="oled-line" id="oled-line-2"></div>
                        <div class="oled-line" id="oled-line-3"></div>
                        <div class="oled-line" id="oled-line-4"></div>
                        <div class="oled-line" id="oled-line-5"></div>
                        <div class="oled-line" id="oled-line-6"></div>
                        <div class="oled-line" id="oled-line-7"></div>
                    </div>
                    <div class="oled-input-container">
                        <input type="text" id="oled-text" placeholder="Digite texto e pressione Enter..." maxlength="16">
                        <button onclick="sendOledText()">Enviar</button>
                    </div>
                    <p class="oled-hint">Pressione Enter para enviar. O texto anterior sobe uma linha.</p>
                </div>
            </section>

            <!-- LED RGB Control -->
            <section class="card rgb-section">
                <h2>üåà LED RGB</h2>
                <div class="rgb-container">
                    <div class="rgb-preview" id="rgb-preview"></div>
                    <div class="rgb-sliders">
                        <div class="slider-group">
                            <label>R: <span id="r-val">0</span></label>
                            <input type="range" id="r-slider" min="0" max="255" value="0" oninput="updateRGB()">
                        </div>
                        <div class="slider-group">
                            <label>G: <span id="g-val">0</span></label>
                            <input type="range" id="g-slider" min="0" max="255" value="0" oninput="updateRGB()">
                        </div>
                        <div class="slider-group">
                            <label>B: <span id="b-val">0</span></label>
                            <input type="range" id="b-slider" min="0" max="255" value="0" oninput="updateRGB()">
                        </div>
                    </div>
                    <button onclick="sendRGB()">Aplicar</button>
                </div>
            </section>

            <!-- Temperature Gauge -->
            <section class="card temp-section">
                <h2>üå°Ô∏è Temperatura RP2040</h2>
                <div class="temp-container">
                    <div class="temp-gauge" id="temp-gauge">
                        <svg viewBox="0 0 200 120" class="gauge-svg">
                            <!-- Background arc -->
                            <path class="gauge-bg" d="M 20 100 A 80 80 0 0 1 180 100" />
                            <!-- Value arc (will be updated by JS) -->
                            <path class="gauge-fill" id="gauge-fill" d="M 20 100 A 80 80 0 0 1 20 100" />
                            <!-- Gauge ticks -->
                            <g class="gauge-ticks">
                                <line x1="20" y1="100" x2="30" y2="100" />
                                <line x1="35" y1="55" x2="43" y2="61" />
                                <line x1="100" y1="20" x2="100" y2="30" />
                                <line x1="165" y1="55" x2="157" y2="61" />
                                <line x1="180" y1="100" x2="170" y2="100" />
                            </g>
                            <!-- Tick labels -->
                            <text x="20" y="115" class="gauge-label">0¬∞</text>
                            <text x="100" y="15" class="gauge-label" text-anchor="middle">50¬∞</text>
                            <text x="180" y="115" class="gauge-label" text-anchor="end">100¬∞</text>
                        </svg>
                        <div class="gauge-needle" id="gauge-needle"></div>
                        <div class="gauge-center"></div>
                    </div>
                    <div class="temp-value">
                        <span id="temp-val"><!--#temp--></span>¬∞C
                    </div>
                    <p class="temp-hint">Sensor de temperatura interno do chip RP2040</p>
                </div>
            </section>
        </div>

        <footer>
            <p>BitDogLab - Placa Educacional RP2040 | <a href="/?test">Teste CGI</a></p>
            <p>Projeto <a href="https://github.com/ArvoreDosSaberes/BitDogLab_HTTPDd_workspace" target="_blank">√Årvore dos Saberes</a></p>
            <p>Autor: <strong>Carlos Delfino</strong> |
                <a href="https://carlosdelfino.eti.br" target="_blank">Website</a> |
                <a href="https://github.com/CarlosDelfino" target="_blank">GitHub</a> |
                <a href="mailto:consultoria@carlosdelfino.eti.br">consultoria@carlosdelfino.eti.br</a>
            </p>
        </footer>
    </div>

    <script src="/js/app.js.gz"></script>
</body>
</html>
